var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{s as d,u as r,v as i,C as s,A as u,r as p,o as n,c as m,w as g,a as f,F as c,d as D,e as b,b as h}from"./vendor.7002d699.js";const I={name:"DeptOperateDialog",props:{getDeptList:{required:!0,type:Function},deptList:{type:Array,default:()=>[]}},setup(e){const{proxy:p}=u();return((e,d)=>{for(var r in d||(d={}))l.call(d,r)&&o(e,r,d[r]);if(a)for(var r of a(d))t.call(d,r)&&o(e,r,d[r]);return e})({},((e,a)=>{const l=d("$api"),t=r({parentId:[],_id:"",deptName:"",userInfo:null,action:"add",title:"新增部门",showDialog:!1}),o=i([]),u=(a,d,r)=>{"add"!==d&&"edit"!==d||(t.action=d,"edit"===d?t.title="编辑部门":"add"===d&&(t.title=r?"添加子部门":"新增部门")),t.showDialog=a,e.$nextTick((()=>{e.$refs.operateForm.resetFields(),l.getUserList().then((e=>{const{list:a}=e;a&&a.length&&(o.value=a)})),void 0!==r&&("add"===d&&(t.parentId=[...r.parentId,r._id].filter((e=>e)),t._id=""),"edit"===d&&(t._id=r._id,t.parentId=r.parentId.filter((e=>e)),t.deptName=r.deptName,t.userInfo=r.userInfo))}))};return{dialogData:t,dialogDataRules:{deptName:{trigger:"blur",required:!0,message:"请输入部门名称"},userInfo:{trigger:"blur",required:!0,message:"请选择部门负责人"}},userList:o,handleToggleDialogShow:u,handleSubmitDeptOperate:()=>{e.$refs.operateForm.validate((async o=>{if(o){const o=s(t);!0===await l.deptOperate(o)?(u(!1),a(),e.$message.success(`${t.title} -> [${o.deptName}] 成功！`)):e.$message.warning(`${t.title} -> [${o.deptName}] 失败！`)}}))}}})(p,e.getDeptList))}},y=f("span",null,"留空，则默认创建一级部门",-1),_=h("取 消"),V=h("确 定");I.render=function(e,a,l,t,o,d){const r=p("el-cascader"),i=p("el-form-item"),s=p("el-input"),u=p("el-option"),h=p("el-select"),I=p("el-form"),v=p("el-button"),w=p("el-dialog");return n(),m(w,{modelValue:e.dialogData.showDialog,"onUpdate:modelValue":a[6]||(a[6]=a=>e.dialogData.showDialog=a),title:e.dialogData.title},{footer:g((()=>[f(v,{onClick:a[5]||(a[5]=a=>e.handleToggleDialogShow(!1))},{default:g((()=>[_])),_:1}),f(v,{type:"primary",onClick:e.handleSubmitDeptOperate},{default:g((()=>[V])),_:1},8,["onClick"])])),default:g((()=>[f(I,{model:e.dialogData,rules:e.dialogDataRules,ref:"operateForm","label-position":"right","label-width":"7em"},{default:g((()=>[f(i,{label:"上级部门",prop:"parentId"},{default:g((()=>[f(r,{modelValue:e.dialogData.parentId,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dialogData.parentId=a),options:l.deptList,props:{label:"deptName",value:"_id",checkStrictly:!0,expandTrigger:"hover"},placeholder:"请选择用户所属部门",clearable:""},null,8,["modelValue","options"]),y])),_:1}),f(i,{label:"部门名称",prop:"deptName"},{default:g((()=>[f(s,{modelValue:e.dialogData.deptName,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogData.deptName=a),placeholder:"请输入部门名称",autocomplete:"off"},null,8,["modelValue"])])),_:1}),f(i,{label:"部门负责人",prop:"userInfo"},{default:g((()=>[f(h,{modelValue:e.dialogData.userInfo,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialogData.userInfo=a),filterable:"",placeholder:"请选择部门负责人","value-key":"_id"},{default:g((()=>[(n(!0),m(c,null,D(e.userList,(e=>(n(),m(u,{key:e._id,label:e.userName,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),e.dialogData.userInfo?(n(),m(i,{key:0,label:"负责人邮箱"},{default:g((()=>[f(s,{modelValue:e.dialogData.userInfo.userEmail,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogData.userInfo.userEmail=a),placeholder:"负责人邮箱",autocomplete:"off",disabled:""},null,8,["modelValue"])])),_:1})):b("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])};export default I;
