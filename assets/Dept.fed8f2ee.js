var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,o)=>{for(var i in o||(o={}))a.call(o,i)&&r(e,i,o[i]);if(t)for(var i of t(o))l.call(o,i)&&r(e,i,o[i]);return e};import{u as i}from"./index.a8eae04d.js";import p from"./DeptOperateDialog.71a5b729.js";import{s as d,v as s,u as n,x as m,r as u,y as c,o as f,c as b,a as y,w as g,z as D,F as w,d as _,A as h,b as k}from"./vendor.7002d699.js";const v={name:"Dept",components:{DeptOperateDialog:p},setup(){const{proxy:e}=h();return o({},(e=>{const t=d("$api"),a=[{label:"部门名称",prop:"deptName"},{label:"负责人",prop:"userInfo",formatter:(e,t,a)=>a&&a.userName?a.userName:""},{label:"创建时间",prop:"createTime",formatter:(e,t,a)=>i.formatterDateTime(a)},{label:"更新时间",prop:"updateTime",formatter:(e,t,a)=>i.formatterDateTime(a)}],l=s([]),r=n({deptName:""}),p=async()=>{const e=o({},r),a=await t.getDeptList(e);a&&(l.value=a)};return m((()=>{p()})),{tableColumns:a,deptList:l,query:r,getDeptList:p,handleQuerySubmit:t=>{const{reset:a}=t;a&&e.$refs.queryForm.resetFields(),p()},showDialog:(t,a,l)=>{e.$refs.deptOperateDialog.handleToggleDialogShow(t,a,l)},handleSingleDel:async a=>{a&&a._id&&(!0===await t.deptOperate({_id:a._id,deptName:a.deptName,action:"delete"})?(e.$message.success("删除成功！"),p()):e.$message.error("删除失败！"))}}})(e))}},C={class:"content_wrapper"},O={class:"query_form_wrapper"},L=k("查询"),N=k(" 重置 "),j={class:"table_container"},q={class:"table_tools"},S=k(" 新增 "),x={class:"table_content"},T=k(" 添加 "),$=k(" 编辑 "),z=k(" 删除 ");v.render=function(e,t,a,l,r,o){const i=u("el-input"),p=u("el-form-item"),d=u("el-button"),s=u("el-form"),n=u("el-table-column"),m=u("el-table"),h=u("DeptOperateDialog"),k=c("has");return f(),b("div",C,[y("div",O,[y(s,{inline:!0,model:e.query,ref:"queryForm"},{default:g((()=>[y(p,{label:"部门名称",prop:"deptName"},{default:g((()=>[y(i,{modelValue:e.query.deptName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.query.deptName=t),placeholder:"请输入部门名称"},null,8,["modelValue"])])),_:1}),y(p,null,{default:g((()=>[y(d,{type:"primary",onClick:e.handleQuerySubmit},{default:g((()=>[L])),_:1},8,["onClick"]),y(d,{onClick:t[2]||(t[2]=t=>e.handleQuerySubmit({reset:!0}))},{default:g((()=>[N])),_:1})])),_:1})])),_:1},8,["model"])]),y("div",j,[y("div",q,[D(y(d,{type:"primary",onClick:t[3]||(t[3]=t=>e.showDialog(!0,"add"))},{default:g((()=>[S])),_:1},512),[[k,"dept-add"]])]),y("div",x,[y(m,{data:e.deptList,"row-key":"_id",stripe:""},{default:g((()=>[(f(!0),b(w,null,_(e.tableColumns,(e=>(f(),b(n,{key:e.prop,prop:e.prop,label:e.label,formatter:e.formatter,width:e.width},null,8,["prop","label","formatter","width"])))),128)),y(n,{label:"操作",width:"210px"},{default:g((t=>[D(y(d,{size:"mini",type:"primary",onClick:a=>e.showDialog(!0,"add",t.row)},{default:g((()=>[T])),_:2},1032,["onClick"]),[[k,"dept-add-1"]]),D(y(d,{size:"mini",onClick:a=>e.showDialog(!0,"edit",t.row)},{default:g((()=>[$])),_:2},1032,["onClick"]),[[k,"dept-edit"]]),D(y(d,{size:"mini",type:"danger",onClick:a=>e.handleSingleDel(t.row)},{default:g((()=>[z])),_:2},1032,["onClick"]),[[k,"dept-delete"]])])),_:1})])),_:1},8,["data"])])]),y(h,{ref:"deptOperateDialog",getDeptList:e.getDeptList,deptList:e.deptList},null,8,["getDeptList","deptList"])])};export default v;
