var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{s as d,u as r,C as i,v as s,x as u,A as p,r as m,o as n,c as g,w as b,a as c,F as f,d as D,b as h}from"./vendor.7002d699.js";const V=(e,a)=>{const l=d("$api"),t=r({userId:"",userName:"",userEmail:"",mobile:"",job:"",state:1,roleList:[],deptId:[],action:"add",title:"新增用户",showDialog:!1}),o=(a,l,o)=>{"add"!==l&&"edit"!==l||(t.action=l,t.title=("add"===l?"新增":"编辑")+"用户"),t.showDialog=a,e.$nextTick((()=>{e.$refs.operateForm.resetFields(),a&&"edit"===l&&(t.userId=o.userId,t.userName=o.userName,t.userEmail=o.userEmail.split("@")[0],t.mobile=o.mobile,t.job=o.job,t.state=o.state,t.roleList=o.roleList,t.deptId=o.deptId)}))},p=s([]),m=s([]);return u((()=>{(async()=>{const e=await l.getRoleAllList();e.length&&(p.value=e)})(),(async()=>{const e=await l.getDeptList();e.length&&(m.value=e)})()})),{dialogData:t,dialogDataRules:{userName:{trigger:"blur",required:!0,message:"请输入用户名称"},userEmail:{trigger:"blur",required:!0,message:"请输入用户邮箱"},mobile:{trigger:"blur",pattern:/1[3-9]\d{9}/,message:"无效手机号"},deptId:{trigger:"blur",required:!0,message:"请选择用户所属部门"}},roleList:p,deptList:m,handleToggleDialogShow:o,handleSubmitUserOperate:()=>{e.$refs.operateForm.validate((async d=>{if(d){const d=i(t);d.userEmail=`${d.userEmail.split("@")[0]}@manager.com`;!0===await l.userOperate(d)?(o(!1),a(),e.$message.success(`${t.title}成功！`)):e.$message.warning(`${t.title}失败！`)}}))}}},y={name:"UserOperateDialog",props:{getUserList:{required:!0,type:Function}},setup(e){const{proxy:d}=p();return((e,d)=>{for(var r in d||(d={}))l.call(d,r)&&o(e,r,d[r]);if(a)for(var r of a(d))t.call(d,r)&&o(e,r,d[r]);return e})({},V(d,e.getUserList))}},w=h("@manager.com"),_=h("取 消"),v=h("确 定");y.render=function(e,a,l,t,o,d){const r=m("el-input"),i=m("el-form-item"),s=m("el-option"),u=m("el-select"),p=m("el-cascader"),h=m("el-form"),V=m("el-button"),y=m("el-dialog");return n(),g(y,{modelValue:e.dialogData.showDialog,"onUpdate:modelValue":a[9]||(a[9]=a=>e.dialogData.showDialog=a),title:e.dialogData.title},{footer:b((()=>[c(V,{onClick:a[8]||(a[8]=a=>e.handleToggleDialogShow(!1))},{default:b((()=>[_])),_:1}),c(V,{type:"primary",onClick:e.handleSubmitUserOperate},{default:b((()=>[v])),_:1},8,["onClick"])])),default:b((()=>[c(h,{model:e.dialogData,rules:e.dialogDataRules,ref:"operateForm","label-position":"right","label-width":"6em"},{default:b((()=>[c(i,{label:"用户名称",prop:"userName"},{default:b((()=>[c(r,{modelValue:e.dialogData.userName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dialogData.userName=a),disabled:"edit"===e.dialogData.action,placeholder:"请输入用户名称",autocomplete:"off"},null,8,["modelValue","disabled"])])),_:1}),c(i,{label:"邮箱",prop:"userEmail"},{default:b((()=>[c(r,{modelValue:e.dialogData.userEmail,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogData.userEmail=a),disabled:"edit"===e.dialogData.action,placeholder:"请输入用户邮箱",autocomplete:"off"},{append:b((()=>[w])),_:1},8,["modelValue","disabled"])])),_:1}),c(i,{label:"手机",prop:"mobile"},{default:b((()=>[c(r,{modelValue:e.dialogData.mobile,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialogData.mobile=a),placeholder:"请输入用户手机号",autocomplete:"off"},null,8,["modelValue"])])),_:1}),c(i,{label:"岗位名称",prop:"job"},{default:b((()=>[c(r,{modelValue:e.dialogData.job,"onUpdate:modelValue":a[4]||(a[4]=a=>e.dialogData.job=a),placeholder:"请输入用户岗位名称",autocomplete:"off"},null,8,["modelValue"])])),_:1}),c(i,{label:"在职状态",prop:"state"},{default:b((()=>[c(u,{modelValue:e.dialogData.state,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dialogData.state=a),placeholder:"请选择用户在职状态"},{default:b((()=>[c(s,{label:"试用期",value:1}),c(s,{label:"在职",value:2}),c(s,{label:"离职",value:3})])),_:1},8,["modelValue"])])),_:1}),c(i,{label:"系统角色",prop:"roleList"},{default:b((()=>[c(u,{modelValue:e.dialogData.roleList,"onUpdate:modelValue":a[6]||(a[6]=a=>e.dialogData.roleList=a),placeholder:"请选择用户系统角色",style:{width:"100%"},multiple:""},{default:b((()=>[(n(!0),g(f,null,D(e.roleList,(e=>(n(),g(s,{key:e._id,label:e.roleName,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(i,{label:"所属部门",prop:"deptId"},{default:b((()=>[c(p,{modelValue:e.dialogData.deptId,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dialogData.deptId=a),options:e.deptList,props:{label:"deptName",value:"_id",checkStrictly:!0,expandTrigger:"hover"},placeholder:"请选择用户所属部门",style:{width:"100%"},clearable:""},null,8,["modelValue","options"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])};export default y;
