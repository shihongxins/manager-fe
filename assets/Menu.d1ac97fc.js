var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,o)=>{for(var n in o||(o={}))l.call(o,n)&&r(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&r(e,n,o[n]);return e};import{u as n}from"./index.a8eae04d.js";import u from"./MenuOperateDialog.bfe70937.js";import{s as i,v as m,u as s,x as p,r as d,y as c,o as f,c as b,a as y,w as g,z as w,F as _,d as h,e as v,A as k,b as C}from"./vendor.7002d699.js";const D={name:"Menu",components:{MenuOperateDialog:u},setup(){const{proxy:e}=k();return o({},(e=>{const a=i("$api"),l=[{label:"菜单名称",prop:"menuName"},{label:"菜单图标",prop:"icon"},{label:"菜单类型",prop:"menuType",formatter:(e,a,l)=>({1:"页面菜单",2:"普通按钮"}[l])},{label:"权限标识",prop:"menuCode"},{label:"路由地址",prop:"path"},{label:"组件路径",prop:"component"},{label:"菜单状态",prop:"menuState",formatter:(e,a,l)=>({0:"停用",1:"正常"}[l])},{label:"创建时间",prop:"createTime",formatter:(e,a,l)=>n.formatterDateTime(l),width:90}],t=m([]),r=s({menuName:"",menuState:1}),u=async()=>{const e=o({},r),l=await a.getMenuList(e);l&&(t.value=l)};return p((()=>{u()})),{tableColumns:l,menuList:t,query:r,getMenuList:u,handleQuerySubmit:a=>{const{reset:l}=a;l&&e.$refs.queryForm.resetFields(),u()},showDialog:(a,l,t)=>{e.$refs.menuOperateDialog.handleToggleDialogShow(a,l,t)},handleSingleDel:async l=>{l&&l._id&&(!0===await a.menuOperate({_id:l._id,menuName:l.menuName,action:"delete"})?(e.$message.success("删除成功！"),u()):e.$message.error("删除失败！"))}}})(e))}},O={class:"content_wrapper"},S={class:"query_form_wrapper"},L=C("查询"),q=C(" 重置 "),M={class:"table_container"},j={class:"table_tools"},N=C(" 新增 "),V={class:"table_content"},x=C(" 添加 "),T=C(" 编辑 "),$=C(" 删除 ");D.render=function(e,a,l,t,r,o){const n=d("el-input"),u=d("el-form-item"),i=d("el-option"),m=d("el-select"),s=d("el-button"),p=d("el-form"),k=d("el-table-column"),C=d("el-table"),D=d("MenuOperateDialog"),z=c("has");return f(),b("div",O,[y("div",S,[y(p,{inline:!0,model:e.query,ref:"queryForm"},{default:g((()=>[y(u,{label:"菜单名称",prop:"menuName"},{default:g((()=>[y(n,{modelValue:e.query.menuName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.query.menuName=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1}),y(u,{label:"菜单状态",prop:"menuState"},{default:g((()=>[y(m,{modelValue:e.query.menuState,"onUpdate:modelValue":a[2]||(a[2]=a=>e.query.menuState=a),placeholder:"请选择菜单状态"},{default:g((()=>[y(i,{label:"停用",value:0}),y(i,{label:"正常",value:1})])),_:1},8,["modelValue"])])),_:1}),y(u,null,{default:g((()=>[y(s,{type:"primary",onClick:e.handleQuerySubmit},{default:g((()=>[L])),_:1},8,["onClick"]),y(s,{onClick:a[3]||(a[3]=a=>e.handleQuerySubmit({reset:!0}))},{default:g((()=>[q])),_:1})])),_:1})])),_:1},8,["model"])]),y("div",M,[y("div",j,[w(y(s,{type:"primary",onClick:a[4]||(a[4]=a=>e.showDialog(!0,"add"))},{default:g((()=>[N])),_:1},512),[[z,"menu-add"]])]),y("div",V,[y(C,{data:e.menuList,"row-key":"_id",stripe:""},{default:g((()=>[(f(!0),b(_,null,h(e.tableColumns,(e=>(f(),b(k,{key:e.prop,prop:e.prop,label:e.label,formatter:e.formatter,width:e.width},null,8,["prop","label","formatter","width"])))),128)),y(k,{label:"操作",width:"210px"},{default:g((a=>[1===a.row.menuType?w((f(),b(s,{key:0,size:"mini",type:"primary",onClick:l=>e.showDialog(!0,"add",a.row)},{default:g((()=>[x])),_:2},1032,["onClick"])),[[z,"menu-add-1"]]):v("",!0),w(y(s,{size:"mini",onClick:l=>e.showDialog(!0,"edit",a.row)},{default:g((()=>[T])),_:2},1032,["onClick"]),[[z,"menu-edit"]]),w(y(s,{size:"mini",type:"danger",onClick:l=>e.handleSingleDel(a.row)},{default:g((()=>[$])),_:2},1032,["onClick"]),[[z,"menu-delete"]])])),_:1})])),_:1},8,["data"])])]),y(D,{ref:"menuOperateDialog",getMenuList:e.getMenuList,menuList:e.menuList},null,8,["getMenuList","menuList"])])};export default D;
