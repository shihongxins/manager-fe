var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,o)=>{for(var n in o||(o={}))l.call(o,n)&&r(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&r(e,n,o[n]);return e};import{u as n}from"./index.2f2dbab9.js";import u from"./MenuOperateDialog.0c544116.js";import{u as i,s as m,v as s,r as p,x as d,o as c,c as b,a as f,w as y,y as g,F as w,d as _,e as h,z as v,b as k}from"./vendor.9586058d.js";const C={name:"Menu",components:{MenuOperateDialog:u},setup(){const{ctx:e}=v();return o({},(e=>{const a=[{label:"菜单名称",prop:"menuName"},{label:"菜单图标",prop:"icon"},{label:"菜单类型",prop:"menuType",formatter:(e,a,l)=>({1:"页面菜单",2:"普通按钮"}[l])},{label:"权限标识",prop:"menuCode"},{label:"路由地址",prop:"path"},{label:"组件路径",prop:"component"},{label:"菜单状态",prop:"menuState",formatter:(e,a,l)=>({0:"停用",1:"正常"}[l])},{label:"创建时间",prop:"createTime",formatter:(e,a,l)=>n.formatterDateTime(l),width:90}],l=i([]),t=m({menuName:"",menuState:1}),r=async()=>{const a=o({},t),r=await e.$api.getMenuList(a);r&&(l.value=r)};return s((()=>{r()})),{tableColumns:a,menuList:l,query:t,getMenuList:r,handleQuerySubmit:a=>{const{reset:l}=a;l&&e.$refs.queryForm.resetFields(),r()},showDialog:(a,l,t)=>{e.$refs.menuOperateDialog.handleToggleDialogShow(a,l,t)},handleSingleDel:async a=>{a&&a._id&&(!0===await e.$api.menuOperate({_id:a._id,menuName:a.menuName,action:"delete"})?(e.$message.success("删除成功！"),r()):e.$message.error("删除失败！"))}}})(e))}},D={class:"content_wrapper"},O={class:"query_form_wrapper"},S=k("查询"),L=k(" 重置 "),q={class:"table_container"},M={class:"table_tools"},j=k(" 新增 "),N={class:"table_content"},V=k(" 添加 "),$=k(" 编辑 "),x=k(" 删除 ");C.render=function(e,a,l,t,r,o){const n=p("el-input"),u=p("el-form-item"),i=p("el-option"),m=p("el-select"),s=p("el-button"),v=p("el-form"),k=p("el-table-column"),C=p("el-table"),T=p("MenuOperateDialog"),z=d("has");return c(),b("div",D,[f("div",O,[f(v,{inline:!0,model:e.query,ref:"queryForm"},{default:y((()=>[f(u,{label:"菜单名称",prop:"menuName"},{default:y((()=>[f(n,{modelValue:e.query.menuName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.query.menuName=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1}),f(u,{label:"菜单状态",prop:"menuState"},{default:y((()=>[f(m,{modelValue:e.query.menuState,"onUpdate:modelValue":a[2]||(a[2]=a=>e.query.menuState=a),placeholder:"请选择菜单状态"},{default:y((()=>[f(i,{label:"停用",value:0}),f(i,{label:"正常",value:1})])),_:1},8,["modelValue"])])),_:1}),f(u,null,{default:y((()=>[f(s,{type:"primary",onClick:e.handleQuerySubmit},{default:y((()=>[S])),_:1},8,["onClick"]),f(s,{onClick:a[3]||(a[3]=a=>e.handleQuerySubmit({reset:!0}))},{default:y((()=>[L])),_:1})])),_:1})])),_:1},8,["model"])]),f("div",q,[f("div",M,[g(f(s,{type:"primary",onClick:a[4]||(a[4]=a=>e.showDialog(!0,"add"))},{default:y((()=>[j])),_:1},512),[[z,"menu-add"]])]),f("div",N,[f(C,{data:e.menuList,"row-key":"_id",stripe:""},{default:y((()=>[(c(!0),b(w,null,_(e.tableColumns,(e=>(c(),b(k,{key:e.prop,prop:e.prop,label:e.label,formatter:e.formatter,width:e.width},null,8,["prop","label","formatter","width"])))),128)),f(k,{label:"操作",width:"210px"},{default:y((a=>[1===a.row.menuType?g((c(),b(s,{key:0,size:"mini",type:"primary",onClick:l=>e.showDialog(!0,"add",a.row)},{default:y((()=>[V])),_:2},1032,["onClick"])),[[z,"menu-add-1"]]):h("",!0),g(f(s,{size:"mini",onClick:l=>e.showDialog(!0,"edit",a.row)},{default:y((()=>[$])),_:2},1032,["onClick"]),[[z,"menu-edit"]]),g(f(s,{size:"mini",type:"danger",onClick:l=>e.handleSingleDel(a.row)},{default:y((()=>[x])),_:2},1032,["onClick"]),[[z,"menu-delete"]])])),_:1})])),_:1},8,["data"])])]),f(T,{ref:"menuOperateDialog",getMenuList:e.getMenuList,menuList:e.menuList},null,8,["getMenuList","menuList"])])};export default C;
